# 控制小车跟踪一个移动目标

## 项目概述

在这一章中，我们的目标是让小车利用摄像头得到的视觉信息，去持续跟踪一个移动的球体。因此，我们将：

- **建立目标**：创建一个简单的描述球体的URDF文件，并且为其添加gazebo控制插件，使它能够在gazebo中自由移动。

- **制作数据集**：通过小车订阅上的摄像机发布的image topic，来获取一些球体在摄像头视线当中的截图；在收集到足够的截图之后，自己制作一个目标检测的数据集。

- **目标检测模型训练**：利用自制的目标检测数据集，训练一个用来检测移动球体的yolo模型。

- **编写控制策略脚本**：控制策略的思路是，通过球体在摄像机中的面积大小来判断与小车距离的远近，进而控制小车x方向的线速度，同时通过球体距离图像中轴线的偏差程度来判断和小车偏移角度的大小，进而控制小车z方向的角速度。

- **控制部署**：首先将目标检测算法部署到小车上，调试来让检测算法正常运行；随后部署控制算法，让小车能够跟踪移动的球体。

## 建立目标

为了在gazebo中同时发布两个机器人的Description Topic，我们需要为它们各自加上一个`namespace`（这里我将小车命名为robot，而球体命名为target）。

对于小车，我们按照launch文件中的顺序为它加上namespace：（注意控制插件里的<robot_param_node>）

然后建模球体，给球体也加上两个轮子，同样差速控制：

## 制作数据集

先利用webserver.py进行image catch，再利用Roboflow进行标注、增广（旋转、缩放、对比度增强），并导出为yoloV8格式数据集。